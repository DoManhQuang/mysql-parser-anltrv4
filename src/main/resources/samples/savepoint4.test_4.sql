-- savepoint4.test
-- 
-- execsql {
--     PRAGMA cache_size=10;
--     DROP TABLE IF EXISTS t1;
--     BEGIN;
--     CREATE TABLE t1(x TEXT);
--     CREATE INDEX i1 ON t1(x);
--     INSERT INTO t1 VALUES(randstr(10,400));
--     INSERT INTO t1 VALUES(randstr(10,400));
--     INSERT INTO t1 SELECT randstr(10,400) FROM t1;
--     INSERT INTO t1 SELECT randstr(10,400) FROM t1;
--     INSERT INTO t1 SELECT randstr(10,400) FROM t1;
--     INSERT INTO t1 SELECT randstr(10,400) FROM t1;
--     INSERT INTO t1 SELECT randstr(10,400) FROM t1;
--     INSERT INTO t1 SELECT randstr(10,400) FROM t1;
--     INSERT INTO t1 SELECT randstr(10,400) FROM t1;
--     COMMIT;
--     SELECT count(*) FROM t1;
-- }
PRAGMA cache_size=10;
DROP TABLE IF EXISTS t1;
BEGIN;
CREATE TABLE t1(x TEXT);
CREATE INDEX i1 ON t1(x);
INSERT INTO t1 VALUES(randstr(10,400));
INSERT INTO t1 VALUES(randstr(10,400));
INSERT INTO t1 SELECT randstr(10,400) FROM t1;
INSERT INTO t1 SELECT randstr(10,400) FROM t1;
INSERT INTO t1 SELECT randstr(10,400) FROM t1;
INSERT INTO t1 SELECT randstr(10,400) FROM t1;
INSERT INTO t1 SELECT randstr(10,400) FROM t1;
INSERT INTO t1 SELECT randstr(10,400) FROM t1;
INSERT INTO t1 SELECT randstr(10,400) FROM t1;
COMMIT;
SELECT count(*) FROM t1;